{% extends "base.html" %}
{% block content %}

<!--  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
  Launch demo modal
</button> -->

<div class="row">
    <div class="col-md-12">
        <div class="card">      


            <form class="form-horizontal">
                <div class="card-body">
                    <h4 class="card-title"><center>Entry Form</h4></center>
                    <button  type="button"  class="btn btn-warning" style="float:right;margin-top: -33px;cursor: pointer" data-toggle="modal" data-target="#exampleModal">View Headphone Details</button>
                    <div class="form-group row">
                        <label for="fname" class="col-sm-3 text-right control-label col-form-label"  style="margin-left: 36px;">User Name</label>
                        <div class="col-sm-5">
                            <select class="form-control" id="user_name"  style="margin-left: 4px;">
                                <option id="0">Select User Name</option>
                                {% for x in user_details %}
                                <option id="{{x.user_id}}" style="display: {{x.display}}">{{x.user_name}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="lname" class="col-sm-3 text-right control-label col-form-label">Location</label>
                        <div class="col-sm-3">
                           <select class="form-control" id="depart_details">
                                <option id="0">Location</option>                                
                                <option id="first_floor">1st Floor</option>
                                <option id="sec_floor">2nd Floor</option>
                                <option id="third_floor">3rd Floor</option>
                                <option id="fourth_floor">4th Floor</option>
                                <option id="fifth_floor">5th Floor</option>
                            </select>
                        </div>
                    </div>


                    <div class="form-group row">
                        <label for="lname" class="col-sm-3 text-right control-label col-form-label">Who use system?</label>
                        <div class="col-sm-3">
                           <select class="form-control" id="use_system">
                                <option id="0"></option>                                
                                <option id="Master">Master</option>
                                <option id="Team Leader">Team Leader</option>
                                <option id="Operator">Operator</option>
                                <option id="IT">IT</option>
                                <option id="CHM">CHM</option>
                                <option id="DP Machine">DP Machine</option>
                                <option value="Reception">Reception</option>
                                <option id="Printer">Printer</option>
                                <option id="Server">Server</option>
                                <option id="Laptop">Laptop</option>
                                <option id="Portable HDD">Portable HDD</option>
                                <option id="Switch">Switch</option>
                                <option id="Router">Router</option>
                                <option id="Camera">Camera</option>
                                <option id="CCTV">CCTV</option>
                                <option id="Tally">Tally</option>
                                <option id="Account">Account</option>
                                <option id="Other">Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="lname" class="col-sm-3 text-right control-label col-form-label">Boot Time</label>
                        <div class="col-sm-3">
                            <input type="text" class="form-control" id="boot_time" placeholder="Boot Time">
                        </div>
                    </div>                    
                    
                    <div class="form-group row">
                        <label for="lname" class="col-sm-3 text-right control-label col-form-label">Unused Program removed ?</label>
                        <div class="col-sm-9">
                            <select class="form-control col-md-3" id="unused_program">
                                <option id="0">No</option>
                                <option id="1">YES</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group row">
                        <label for="email1" class="col-sm-3 text-right control-label col-form-label">Temp files removed ?</label>
                        <div class="col-sm-9">
                            <select class="form-control col-md-3" id="temp_file">
                                <option id="0">No</option>
                                <option id="1">YES</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="email1" class="col-sm-3 text-right control-label col-form-label">Latest anti-virus update 1 day old ?</label>
                        <div class="col-sm-9">
                            <select class="form-control col-md-3" id="latest_antivirus">
                                <option id="0">No</option>
                                <option id="1">YES</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="email1" class="col-sm-3 text-right control-label col-form-label">History & Cache file cleaned up ?</label>
                        <div class="col-sm-9">
                            <select class="form-control col-md-3" id="history_clean">
                                <option id="0">No</option>
                                <option id="1">YES</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="email1" class="col-sm-3 text-right control-label col-form-label">Server folder connectivity ?</label>
                        <div class="col-sm-9">
                            <select class="form-control col-md-3" id="server_conn">
                                <option id="0">No</option>
                                <option id="1">YES</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="email1" class="col-sm-3 text-right control-label col-form-label">Internet connectivity ?</label>
                        <div class="col-sm-9">
                            <select class="form-control col-md-3" id="internet_conn">
                                <option id="0">No</option>
                                <option id="1">YES</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="email1" class="col-sm-3 text-right control-label col-form-label">Printer connectivity ?</label>
                        <div class="col-sm-9">
                            <select class="form-control col-md-3" id="printer_conn">
                                <option id="0">No</option>
                                <option id="1">YES</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="email1" class="col-sm-3 text-right control-label col-form-label">Head phone working ?</label>
                        <div class="col-sm-9">
                            <select class="form-control col-md-3" id="head_phone">
                                <option id="0">No</option>
                                <option id="1">YES</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group row">
                        <label for="fname" class="col-sm-3 text-right control-label col-form-label">Headphone's Number</label>
                        <div class="col-sm-5">
                            <select class="form-control" id="head_phone_number" style="width: 189px;">
                                <option id="0"></option>
                                {% for t in hp_array %}
                                    <option id="{{t.id}}">{{t.num}}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="email1" class="col-sm-3 text-right control-label col-form-label">E-Mail Configured ?</label>
                        <div class="col-sm-9">
                            <textarea id="email_configure"></textarea>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="email1" class="col-sm-3 text-right control-label col-form-label">Assigned to?</label>
                        <div class="col-sm-9">
                            <textarea id="assigned_to"></textarea>
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="email1" class="col-sm-3 text-right control-label col-form-label">Office 365 ?</label>
                        <div class="col-sm-9">
                            <select class="form-control col-md-3" id="microsoft_users" style="font-size: 12px">
                                <option value="0"></option>
                                <option value="ankit@bluewatertradewinds.onmicrosoft.com">ankit@bluewatertradewinds.onmicrosoft.com</option>
                                <option value="User4-office-365@bwesglobal.com">User4-office-365@bwesglobal.com</option>
                                <option value="user-office-365@bwesglobal.com">user-office-365@bwesglobal.com</option>
                                <option value="user2.office-365@bwesglobal.com">user2.office-365@bwesglobal.com</option>
                                <option value="User3-office-365@bwesglobal.com">User3-office-365@bwesglobal.com</option>
                                <option value="user5-office-365@bwesglobal.com">user5-office-365@bwesglobal.com</option>
                                <option value="user6.office@bwesglobal.com">user6.office@bwesglobal.com</option>
                                <option value="bossops@bwesglobal.com">bossops@bwesglobal.com</option>
                                <option value="User7-office-365@bwesglobal.com">User7-office-365@bwesglobal.com</option>
                                <option value="User8-office-365@bwesglobal.com">User8-office-365@bwesglobal.com</option>
                                <option value="Accounts">Accounts</option>
                            </select>
                        </div>
                    </div>


                    <div class="form-group row">
                        <label for="email1" class="col-sm-3 text-right control-label col-form-label">Issue,if any </label>
                        <div class="col-sm-3">
                            <textarea id="issue_any"></textarea>
                        </div>
                    </div>
                </div>

                <div class="border-top">
                    <div class="card-body">
                        <button type="button" class="btn btn-warning col-md-12" id="submit_weekly_entry">Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>



<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="width: 624px;">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">View Heaphone's Details</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">        
        <img src="/static/img/log.jpg" style="height: 590px;width: 589px;">
        <p><i>Your headphone is your responsibility. If it is damaged or lost you have to repurchase it / sought a mechanics' help at your own expense.</i></p>
      </div>        
      
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
      </div>
    </div>
  </div>
</div>


<script type="text/javascript">
    $('#submit_weekly_entry').click(function(){
    var user             = $('#user_name').children(":selected").attr("id");
    var boot_time        = $('#boot_time').val();    
    var unused_program   = $('#unused_program').val();
    var temp_file        = $('#temp_file').val();
    var latest_antivirus = $('#latest_antivirus').val();
    var history_clean    = $('#history_clean').val();
    var server_conn      = $('#server_conn').val();
    var internet_conn    = $('#internet_conn').val();
    var printer_conn     = $('#printer_conn').val();
    var issue_any        = $('#issue_any').val();
    var head_phone       = $('#head_phone').val();

    var depart_name      = $('#depart_details').val();
    var use_system       = $('#use_system').val();
    var email_configure  = $('#email_configure').val();
    var head_phone_num   = $('#head_phone_number').val();
    var assigned_to      = $('#assigned_to').val();
    var office365        = $('#microsoft_users').val();


    


    //alert(user)
        $.ajax({
          url: '/audit/submit_weekly_entry/',
          dataType: 'JSON',
          type: 'GET',
          data:
          { 
            'user'              : user,
            'boot_time'         : boot_time,
            'unused_program'    : unused_program,
            'temp_file'         : temp_file,
            'latest_antivirus'  : latest_antivirus,
            'history_clean'     : history_clean,
            'server_conn'       : server_conn,
            'internet_conn'     : internet_conn,
            'printer_conn'      : printer_conn,
            'issue_any'         : issue_any,  
            'head_phone'        : head_phone,
            'depart_name'       : depart_name,
            'use_system'        : use_system,
            'email_configure'   : email_configure, 
            'head_phone_num'    : head_phone_num, 
            'assigned_to'       : assigned_to,
            'office365'         : office365,        
          },

          success : function(obj){           
            if(obj=='done'){
                alert('Records submitted');
                location.reload(true); 
            }else if (obj=='repeat'){
                alert('Records already inserted');
            }
           
          },
          error : function(err){
            console.log(JSON.stringify(err,null,4));
          }        
        });
      });


    function upperCaseF(a){
    setTimeout(function(){
        a.value = a.value.toUpperCase();
    }, 1);
}

$(document).ready(function(){
    var curr_url  = window.location.href 
    var user_name = parseURLParams(curr_url)['user_name']
    $('#user_name').val(user_name)
    
     // $.ajax({
     //      url: '/audit/refresh_weekly_entry/',
     //      dataType: 'JSON',
     //      type: 'GET',
     //      data:
     //      { 
                   
     //      },

     //      success : function(obj){           
            
           
     //      },
     //      error : function(err){
     //        console.log(JSON.stringify(err,null,4));
     //      }        
     //    });
})
    
</script>

<script type="text/javascript">
function parseURLParams(url) {
    var queryStart = url.indexOf("?") + 1,
        queryEnd   = url.indexOf("#") + 1 || url.length + 1,
        query = url.slice(queryStart, queryEnd - 1),
        pairs = query.replace(/\+/g, " ").split("&"),
        parms = {}, i, n, v, nv;

    if (query === url || query === "") {
        return;
    }

    for (i = 0; i < pairs.length; i++) {
        nv = pairs[i].split("=");
        n = decodeURIComponent(nv[0]);
        v = decodeURIComponent(nv[1]);
        if (!parms.hasOwnProperty(n)) {
            parms[n] = [];
        }
        parms[n].push(nv.length === 2 ? v : null);
    }
    return parms;
}
</script>

{% endblock %}